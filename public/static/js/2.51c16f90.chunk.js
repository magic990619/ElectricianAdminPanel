(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1210:function(e,t,a){"use strict";var n=a(9),r=a(10),o=a(13),c=a(11),i=a(12),l=a(0),s=a.n(l),u=a(117),d=a(19);t.a=function(e,t){return function(a){return function(l){function m(a){var r;return Object(n.a)(this,m),r=Object(o.a)(this,Object(c.a)(m).call(this,a)),Object(u.b)(e,t),r}return Object(i.a)(m,l),Object(r.a)(m,[{key:"render",value:function(){var t=this;return s.a.createElement(d.a.Consumer,null,function(n){return n.store,n.storeState[e]?s.a.createElement(a,t.props):null})}}]),m}(s.a.PureComponent)}}},1211:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},1212:function(e,t,a){"use strict";var n=a(1211);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),o=(0,n(a(1213)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Add");t.default=o},1213:function(e,t,a){"use strict";var n=a(1211);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),o=n(a(82)),c=n(a(67));var i=function(e,t){var a=function(t){return r.default.createElement(c.default,t,e)};return a.displayName="".concat(t,"Icon"),(a=(0,o.default)(a)).muiName="SvgIcon",a};t.default=i},1216:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(10),o=a(13),c=a(11),i=a(12),l=a(0),s=a.n(l),u=a(33),d=a(16),m=a(141),p=a(19),g=a(1210),f=a(1),h=a(52),y=a(24),E=a(329),C=a.n(E),b=a(225),v=a.n(b),O=a(1212),j=a.n(O),w=a(97),x="[CATEGORY APP] GET CATEGORIES BY CODE",A="[CATEGORY APP] GET CATEGORIES",N="[CATEGORY APP] UPDATE CATEGORY",T="[CATEGORY APP] ADD CATEGORY",P="[CATEGORY APP] SET SEARCH TEXT",D="[CATEGORY APP] OPEN EDIT CATEGORY DIALOG",S="[CATEGORY APP] OPEN NEW CATEGORY DIALOG",k="[CATEGORY APP] REMOVE CATEGORY",G="[CATEGORY APP] CLOSE EDIT CATEGORY DIALOG",R="[CATEGORY APP] CLOSE NEW CATEGORY DIALOG",Y="[CATEGORY APP] CHANGE FREE STATUS";function _(e){switch(console.log(e),e.id){case"all":return function(t){return w.a.post("/category/getAllCategories",{}).then(function(a){return t({type:A,payload:a.data.doc,curcode:e.id,routeParams:e})})};default:var t=e.id;return function(a){return w.a.post("/category/getCategoriesByCode",{code:t}).then(function(t){return a({type:x,payload:t.data.doc,names:t.data.names,curcode:e.id,routeParams:e})})}}}function I(e){return function(t){return w.a.post("/category/getCategoriesByCode",{code:e}).then(function(a){return t({type:x,payload:a.data.doc,names:a.data.names,curcode:e})})}}function F(e){console.log(e);e.code.slice(0,e.code.length-2);return function(t,a){var n=a().Categories.categories.routeParams;return w.a.post("/category/updateCategory",{category:e}).then(function(e){return Promise.all([t({type:N})]).then(function(){return t(_(n))})})}}function H(e){return function(t,a){var n=a().Categories.categories.routeParams;return w.a.post("/category/addNewCategory",{category:e}).then(function(e){return Promise.all([t({type:T,payload:e.data.doc})]).then(function(){return t(_(n))})})}}function L(e,t){t.slice(0,t.length-2);return function(t,a){var n=a().Categories.categories.routeParams;return w.a.post("/category/removeCategory",{categoryId:e}).then(function(e){return Promise.all([t({type:k})]).then(function(){return t(_(n))})})}}function M(e){return{type:P,searchText:e.target.value}}function B(e){return{type:D,data:e}}function U(){return{type:S}}function W(){return{type:G}}function q(){return{type:R}}function z(e,t){return function(a,n){var r=n().Categories.categories.routeParams;return w.a.post("/category/changeFreeStatus",{key:e,value:t}).then(function(e){return Promise.all([a({type:Y})]).then(function(){return a(_(r))})})}}var J=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.setSearchText,a=e.searchText,n=e.mainTheme,r=e.openNewCategoryDialog,o=e.names,c=[];if(o)for(var i=0;i<o.length;i++)c.push(s.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},s.a.createElement(v.a,{component:y.a,color:"inherit",variant:"h6",to:"/categories/"+o[i].code},s.a.createElement("span",{className:"hidden sm:flex"},o[i].name))));return s.a.createElement("div",{className:"flex flex-1 items-center justify-between p-18 sm:p-24"},s.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(u.a,{animation:"transition.expandIn",delay:300},s.a.createElement(f.w,{className:"text-32 mr-12"},"category")),s.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},s.a.createElement(v.a,{component:y.a,color:"inherit",variant:"h6",to:"/categories/all"},s.a.createElement("span",{className:"hidden sm:flex"},"Main Categories"))),c)),s.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-8 sm:px-12"},s.a.createElement(h.MuiThemeProvider,{theme:n},s.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},s.a.createElement(f.L,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4",elevation:1},s.a.createElement(f.w,{className:"mr-8",color:"action"},"search"),s.a.createElement(f.y,{placeholder:"Search",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:t}))))),s.a.createElement(u.a,{animation:"transition.slideRightIn",delay:300},s.a.createElement(C.a,{color:"primary","aria-label":"Add",onClick:r},s.a.createElement(j.a,null))))}}]),t}(l.Component);var V=Object(p.b)(function(e){var t=e.Categories,a=e.fuse;return{searchText:t.categories.searchText,mainTheme:a.settings.mainTheme,names:t.categories.names}},function(e){return Object(d.c)({setSearchText:M,openNewCategoryDialog:U},e)})(J),X=a(332),K=a(20),Q=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={selected:null,data:[]},a.getFilteredArray=function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:u.r.filterArrayByString(a,t)},a.openSelected=function(e){a.setState({selected:e.currentTarget})},a.closeSelected=function(){a.setState({selected:null})},a.handleFreeChange=function(e){return function(t){a.props.changeFreeStatus(e,t.target.checked)}},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.categories,n=t.openEditCategoryDialog,r=t.removeCategory,o=t.searchText,c=this.getFilteredArray(a,o);return c||0!==c.length?s.a.createElement("div",{className:"min-w-full"},s.a.createElement(u.a,{animation:"transition.slideUpIn",delay:300},s.a.createElement(X.b,{className:"-striped -highlight border-0",getTrProps:function(e,t,a){return{className:"cursor-pointer text-center",onDoubleClick:function(e,a){t&&n(t.original)}}},data:c,columns:[{Header:"",width:100,className:"flex-wrap justify-center",Cell:function(e){return s.a.createElement("div",{className:"fix items-center"},e.original.type&&s.a.createElement(f.w,null,"create_new_folder"),!e.original.type&&s.a.createElement(f.w,null,"assignment"))}},{Header:"ID",accessor:"_id",filterable:!0,width:250,className:"flex-wrap font-bold justify-center"},{Header:"Category Name",accessor:"name",filterable:!0,className:"flex-wrap font-bold justify-center"},{Header:"Subcategory count",accessor:"subcount",filterable:!0,width:150,className:"flex-wrap font-bold justify-center"},{Header:"Free",width:80,Cell:function(t){return s.a.createElement(f.r,{className:"mt-8 mb-16",control:s.a.createElement(f.U,{checked:t.original.free,onChange:e.handleFreeChange(t.original._id)})})}},{Header:"",width:160,Cell:function(e){return s.a.createElement("div",{className:"fix items-center"},s.a.createElement(f.x,{component:y.b,to:e.original.type?"/categories/"+e.original.code:"/contents/"+e.original._id},s.a.createElement(f.w,null,e.original.type?"arrow_forward_ios":"comment")),s.a.createElement(f.x,{onClick:function(t){t.stopPropagation(),window.confirm("Are you sure to delete it?")&&r(e.original._id,e.original.code)}},s.a.createElement(f.w,null,"delete")))}}],defaultPageSize:10,noDataText:"No Category found"}))):s.a.createElement("div",{className:"flex items-center justify-center h-full"},s.a.createElement(f.ab,{color:"textSecondary",variant:"h5"},"No Category found"))}}]),t}(l.Component);var Z=Object(m.g)(Object(K.a)(function(e){var t=e.Categories;return{categories:t.categories.entities,selected:t.categories.selected,searchText:t.categories.searchText,category_name:t.category}},function(e){return Object(d.c)({getCategories:_,getCategoriesByCode:I,openEditCategoryDialog:B,removeCategory:L,changeFreeStatus:z},e)})(Q)),$=a(8),ee=a(15),te={_id:"",name:"",code:"",subcount:0,type:!1},ae=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state=Object($.a)({},te),a.setcurcode=function(e){"edit"!==a.props.categoryDialog.type&&a.setState({code:a.props.curcode})},a.handleChange=function(e){a.setState(ee.a.set(Object($.a)({},a.state),e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))},a.closeComposeDialog=function(){"edit"===a.props.categoryDialog.type?a.props.closeEditCategoryDialog():a.props.closeNewCategoryDialog()},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.setcurcode,1e3)}},{key:"componentDidUpdate",value:function(e,t,a){!e.categoryDialog.props.open&&this.props.categoryDialog.props.open&&("edit"===this.props.categoryDialog.type&&this.props.categoryDialog.data&&!ee.a.isEqual(this.props.categoryDialog.data,t)&&this.setState(Object($.a)({},this.props.categoryDialog.data)),"new"!==this.props.categoryDialog.type||ee.a.isEqual(te,t)||this.setState(Object($.a)({},te)),this.setcurcode(this.props.curcode))}},{key:"canBeSubmitted",value:function(){return this.state.name.length>0}},{key:"render",value:function(){var e=this,t=this.props,a=t.categoryDialog,n=t.addCategory,r=t.updateCategory,o=t.removeCategory;return s.a.createElement(f.j,Object.assign({classes:{paper:"m-24"}},a.props,{onClose:this.closeComposeDialog,fullWidth:!0,maxWidth:"sm"}),s.a.createElement(f.a,{position:"static",elevation:1},s.a.createElement(f.Y,{className:"flex w-full"},s.a.createElement(f.ab,{variant:"subtitle1",color:"inherit"},"new"===a.type?"New Category":"Edit Category")),s.a.createElement("div",{className:"flex flex-col items-center justify-center pb-24"},"edit"===a.type&&s.a.createElement(f.ab,{variant:"h6",color:"inherit",className:"pt-8"},this.state.name))),s.a.createElement(f.l,{classes:{root:"p-24"}},s.a.createElement("div",{className:"flex"},s.a.createElement("div",{className:"min-w-48 pt-20"},s.a.createElement(f.w,{color:"action"},"category_circle")),s.a.createElement(f.ab,{variant:"subtitle1",color:"inherit",className:"min-w-160 pt-20"},"Category Name"),s.a.createElement(f.X,{className:"mb-24",label:"Category Name",autoFocus:!0,id:"name",name:"name",value:this.state.name,onChange:this.handleChange,variant:"outlined",required:!0,fullWidth:!0})),s.a.createElement("div",{className:"flex center"},s.a.createElement("div",{className:"min-w-48 pt-20"},s.a.createElement(f.w,{color:"action"},"add_to_queue")),s.a.createElement(f.ab,{variant:"subtitle1",color:"inherit",className:"min-w-160 pt-20"},"Has SubCategory"),s.a.createElement(f.f,{id:"type",name:"type",onChange:this.handleChange,checked:this.state.type}))),"new"===a.type?s.a.createElement(f.k,{className:"justify-between pl-16"},s.a.createElement(f.c,{variant:"contained",color:"primary",onClick:function(){n(e.state),e.closeComposeDialog()},disabled:!this.canBeSubmitted()},"Add")):s.a.createElement(f.k,{className:"justify-between pl-16"},s.a.createElement(f.c,{variant:"contained",color:"primary",onClick:function(){r(e.state),e.closeComposeDialog()},disabled:!this.canBeSubmitted()},"Save"),s.a.createElement(f.x,{onClick:function(){window.confirm("Are you sure to delete it?")&&(o(e.state._id),e.closeComposeDialog())}},s.a.createElement(f.w,null,"delete"))))}}]),t}(l.Component);var ne=Object(p.b)(function(e){var t=e.Categories;return{categoryDialog:t.categories.categoryDialog,curcode:t.categories.curcode}},function(e){return Object(d.c)({closeEditCategoryDialog:W,closeNewCategoryDialog:q,addCategory:H,updateCategory:F,removeCategory:L},e)})(ae),re={entities:[],searchText:"",selected:[],names:[],routeParams:{},curcode:"",categoryDialog:{type:"new",props:{open:!1},data:null}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object($.a)({},e,{entities:t.payload,names:null,curcode:t.curcode,routeParams:t.routeParams});case x:return Object($.a)({},e,{entities:t.payload,names:t.names,curcode:t.curcode,routeParams:t.routeParams});case S:return Object($.a)({},e,{categoryDialog:{type:"new",props:{open:!0},data:null}});case D:return Object($.a)({},e,{categoryDialog:{type:"edit",props:{open:!0},data:t.data}});case R:return Object($.a)({},e,{categoryDialog:{type:"new",props:{open:!1},data:null}});case G:return Object($.a)({},e,{categoryDialog:{type:"edit",props:{open:!1},data:null}});case P:return Object($.a)({},e,{searchText:t.searchText});default:return e}},ce=Object(d.d)({categories:oe}),ie=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getCategories(this.props.match.params)}},{key:"componentDidUpdate",value:function(e,t){ee.a.isEqual(this.props.location,e.location)||this.props.getCategories(this.props.match.params)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.l,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:s.a.createElement(V,null),content:s.a.createElement(Z,null),innerScroll:!0}),s.a.createElement(ne,null))}}]),t}(l.Component);t.default=Object(g.a)("Categories",ce)(Object(m.g)(Object(p.b)(function(e){var t=e.Categories;return{categories:t.categories.entities,selected:t.categories.selected,searchText:t.categories.searchText,category:t.category}},function(e){return Object(d.c)({getCategories:_},e)})(ie)))}}]);