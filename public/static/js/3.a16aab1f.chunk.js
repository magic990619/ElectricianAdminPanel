(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1210:function(e,t,n){"use strict";var a=n(9),r=n(10),i=n(13),o=n(11),s=n(12),c=n(0),l=n.n(c),u=n(117),d=n(19);t.a=function(e,t){return function(n){return function(c){function m(n){var r;return Object(a.a)(this,m),r=Object(i.a)(this,Object(o.a)(m).call(this,n)),Object(u.b)(e,t),r}return Object(s.a)(m,c),Object(r.a)(m,[{key:"render",value:function(){var t=this;return l.a.createElement(d.a.Consumer,null,function(a){return a.store,a.storeState[e]?l.a.createElement(n,t.props):null})}}]),m}(l.a.PureComponent)}}},1215:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(9),i=n(10),o=n(13),s=n(11),c=n(12),l=n(0),u=n.n(l),d=n(33),m=n(1),p=n(16),h=n(141),f=n(19),v=n(1210),g=n(15),E=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},u.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},u.a.createElement("div",{className:"flex items-center"},u.a.createElement(d.a,{animation:"transition.expandIn",delay:300},u.a.createElement(m.w,{className:"text-32 mr-12"},"edit")),u.a.createElement(d.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(m.ab,{variant:"h6",className:"hidden sm:flex"},"Edit Contents")))))}}]),t}(l.Component),w=n(97),C="[CONTENT APP] GET CONTENTS",b="[CONTENT APP] ADD CONTENT",y="[CONTENT APP] SAVE TEXT CONTENT",_="[CONTENT APP] SAVE IMAGE CONTENT",N="[CONTENT APP] SAVE QUESTION CONTENT",x="[CONTENT APP] REMOVE CONTENT";function O(e){var t=e.id;return function(n){return w.a.post("/content/getContentsByCategoryId",{id:t}).then(function(t){return n({type:C,payload:t.data.doc,routeParams:e})})}}function j(e,t,n){var a={id:e};return function(e){return w.a.post("/content/addContent",{content:t,_id:n}).then(function(t){return Promise.all([e({type:b,payload:t.data.doc})]).then(function(){return e(O(a))})})}}function I(e,t){var n={id:t};return function(a){return w.a.post("/content/saveTextContent",{content:e,_id:t}).then(function(e){return Promise.all([a({type:y,payload:e.data.doc})]).then(function(){return a(O(n))})})}}function T(e,t,n){return function(a,r){var i=r().Contents.contents.routeParams;return w.a.post("/content/saveImageContent",{content:e,_id:t,path:n}).then(function(e){return Promise.all([a({type:_,payload:e.data.doc})]).then(function(){return a(O(i))})})}}function S(e,t){var n={id:t};return function(a){return w.a.post("/content/saveQuestionContent",{content:e,_id:t}).then(function(e){return Promise.all([a({type:N,payload:e.data.doc})]).then(function(){return a(O(n))})})}}function A(e,t){var n={id:t};return function(a){return w.a.post("/content/removeContent",{content:e,_id:t}).then(function(e){return Promise.all([a({type:x,payload:e.data.doc})]).then(function(){return a(O(n))})})}}var D={entities:"",routeParams:{}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(a.a)({},e,{entities:t.payload,routeParams:t.routeParams});case b:case y:case N:case x:return Object(a.a)({},e,{entities:t.payload});default:return e}},M=Object(p.d)({contents:k}),P=n(52),Q=n(62),q=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).toEditMode=function(){n.setState({editMode:1})},n.save=function(){n.props.saveTextContent(n.state,n.props.contents.category_id),n.setState({editMode:0})},n.handleChange=function(e){n.setState(g.a.set(Object(a.a)({},n.state),e.target.name,e.target.value))},n.state={_id:e._id,title:e.title,textcontent:e.textcontent,editMode:0},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.removeContent;return u.a.createElement(m.L,{elevation:3,className:"rounded-4 mb-24 ml-12 mr-12 mt-4"},u.a.createElement("div",{className:"flex"},this.state.editMode>0&&u.a.createElement(m.X,{className:"mb-12 min-w-auto ml-24 mr-24",id:"title",name:"title",value:this.state.title,onChange:this.handleChange,variant:"outlined",required:!0,fullWidth:!0}),!this.state.editMode&&u.a.createElement("h1",{style:{padding:"10px 20px",textAlign:"left",color:"#7D7D7D",margin:"auto",width:"85%"}},this.state.title),u.a.createElement(m.x,{className:n.button,"aria-label":"Edit",onClick:this.toEditMode},u.a.createElement(m.w,null,"edit")),u.a.createElement(m.x,{className:n.button,"aria-label":"Save",disabled:!this.state.editMode,onClick:this.save},u.a.createElement(m.w,null,"save")),u.a.createElement(m.x,{className:n.button,"aria-label":"Delete",onClick:function(t){t.stopPropagation(),window.confirm("Are you sure to delete it?")&&a(e.state,e.props.contents.category_id)}},u.a.createElement(m.w,null,"delete"))),u.a.createElement("div",{className:"flex center"},this.state.editMode>0&&u.a.createElement(m.X,{className:"mb-12 min-w-auto pt-20 ml-24 mr-24",multiline:!0,rows:"5",id:"textcontent",name:"textcontent",onChange:this.handleChange,value:this.state.textcontent,variant:"outlined",fullWidth:!0}),!this.state.editMode&&u.a.createElement("textarea",{style:{padding:"10px 20px",color:"black",margin:"15px 15px 5px",width:"100%",fontSize:"22px"},rows:"5",readOnly:!0,value:this.state.textcontent})))}}]),t}(l.Component);var W=Object(P.withStyles)(function(e){return{button:{margin:e.spacing.unit},input:{display:"none"},disableStyle1:{color:Q.red}}})(Object(f.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(p.c)({saveTextContent:I,removeContent:A},e)})(q)),z=n(368),U=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).toEditMode=function(){n.setState({editMode:1})},n.save=function(){n.setState({editMode:0})},n.openImageDialog=function(){n.setState({open:!0})},n.closeImageDialog=function(){n.setState({open:!1})},n.handleselectedFile=function(e){var t=e.target.files[0],a=new FormData;a.append("file",t);w.a.post("/upload",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){n.props.saveImageContent(n.state,n.props.contents.category_id,"http://localhost:8888/uploads/"+e.data.file.filename)})},n.state={_id:e._id,title:e.title,src:e.src,editMode:0,open:!1},n.openImageDialog=n.openImageDialog.bind(Object(z.a)(Object(z.a)(n))),n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){g.a.isEqual(this.props.src,e.src)||(this.setState({src:this.props.src,open:!1}),this.openImageDialog=this.openImageDialog.bind(this))}},{key:"render",value:function(){var e=this,t=this.props.removeContent;return u.a.createElement(m.L,{elevation:3,className:"rounded-4 mb-24 ml-12 mr-12 mt-4"},u.a.createElement("div",{className:"flex center justify-center"},u.a.createElement("img",{src:this.state.src,width:"auto",height:"350px",alt:"No data! Upload ",onClick:this.openImageDialog})),u.a.createElement("div",{className:"flex center mt-12 mb-12 justify-center"},u.a.createElement("input",{type:"file",id:"photo_url",name:"photo_url",onChange:this.handleselectedFile,ref:function(t){return e.upload=t},style:{display:"none"}}),u.a.createElement(m.c,{variant:"contained",color:"default",className:"flex right mt-12 mb-12 mr-12 ml-12",onClick:function(t){return e.upload.click()}},"Change",u.a.createElement(m.w,null,"find_replace")),u.a.createElement(m.c,{variant:"contained",color:"default",className:"flex right mt-12 mb-12 mr-12 ml-12",onClick:function(n){n.stopPropagation(),window.confirm("Are you sure to delete it?")&&t(e.state,e.props.contents.category_id)}},"Delete",u.a.createElement(m.w,null,"delete"))),u.a.createElement(m.j,{open:this.state.open,fullWidth:!0,onClose:this.closeImageDialog,maxWidth:"xl"},u.a.createElement(m.l,null,u.a.createElement("div",{className:"flex center justify-center"},u.a.createElement("img",{src:this.state.src,width:"auto",height:"100%",alt:"No data! Upload"})))))}}]),t}(l.Component);var X=Object(f.b)(function(e){var t=e.Contents;return{imageDialog:t.contents.imageDialog,contents:t.contents.entities}},function(e){return Object(p.c)({saveImageContent:T,removeContent:A},e)})(U),F=n(331),L=n.n(F),V=n(330),R=n.n(V),G=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).toEditMode=function(){n.setState({editMode:1})},n.save=function(){n.props.saveQuestionContent(n.state,n.props.contents.category_id),n.setState({editMode:0})},n.handleChangeRadio=function(e){return function(){var t=n.state.answers;t.forEach(function(t){t.result=!1,t.answer_id===e+1&&(t.result=!0)}),n.setState({answers:t})}},n.handleChangeAnswer=function(e){return function(t){var a=n.state.answers;a.forEach(function(n){n.answer_id===e+1&&(n.answer_string=t.target.value)}),n.setState({answers:a})}},n.handleChange=function(e){n.setState(g.a.set(Object(a.a)({},n.state),e.target.name,e.target.value))},n.addNewAnswer=function(){var e=n.state.answers;e.push({answer_id:e.length+1,answer_string:"New Answer",result:!1}),n.setState({answers:e})},n.deleteAnswer=function(e){return function(){var t=[];n.state.answers.forEach(function(n){if(n.answer_id<e+1&&t.push(n),n.answer_id>e+1){var a=n;a.answer_id--,t.push(a)}}),n.setState({answers:t})}},n._renderAnswerItemNormal=function(e,t){var n=String.fromCharCode(65+e);return u.a.createElement("div",{key:e},u.a.createElement("h2",{style:{padding:"10px 20px",textAlign:"left",color:!0===t.result?"green":"black",margin:"auto",width:"100%"}},n+")  "+t.answer_string))},n._renderAnswerItemEdit=function(e,t){return u.a.createElement("div",{className:"flex",key:e},u.a.createElement(R.a,{checked:t.result,onChange:n.handleChangeRadio(e),name:"result",id:"result"}),u.a.createElement(m.X,{className:"mt-6 mb-6 min-w-auto ml-24 mr-24",id:"answer",name:"answer",value:t.answer_string,onChange:n.handleChangeAnswer(e),variant:"outlined",fullWidth:!0,required:!0}),u.a.createElement(m.o,{color:"default","aria-label":"clear",size:"small",className:"mt-12 mb-6 min-w-auto ml-24 mr-24",onClick:n.deleteAnswer(e)},u.a.createElement(m.w,null,"clear")))},n._renderAnswers=function(){return n.state.answers.map(function(e,t){return n.state.editMode?n._renderAnswerItemEdit(t,e):n._renderAnswerItemNormal(t,e)})},n._renderAnswersContainer=function(){return n.state.editMode?u.a.createElement(L.a,null,n._renderAnswers()):u.a.createElement("div",null,n._renderAnswers())},n.state={_id:e._id,question:e.question,answers:e.answers,editMode:0},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.removeContent;return u.a.createElement(m.L,{elevation:3,className:"rounded-4 mb-24 ml-12 mr-12 mt-4"},u.a.createElement("div",{className:"flex"},this.state.editMode>0&&u.a.createElement(m.X,{className:"min-w-auto ml-24 mr-24",id:"question",name:"question",value:this.state.question,onChange:this.handleChange,variant:"outlined",required:!0,fullWidth:!0}),!this.state.editMode&&u.a.createElement("h1",{style:{textAlign:"left",color:"blue",margin:"auto",width:"85%"}},this.state.question),u.a.createElement(m.x,{"aria-label":"Edit",onClick:this.toEditMode},u.a.createElement(m.w,null,"edit")),u.a.createElement(m.x,{"aria-label":"Save",disabled:!this.state.editMode,onClick:this.save},u.a.createElement(m.w,null,"save")),u.a.createElement(m.x,{"aria-label":"Delete",onClick:function(n){n.stopPropagation(),window.confirm("Are you sure to delete it?")&&t(e.state,e.props.contents.category_id)}},u.a.createElement(m.w,null,"delete"))),this._renderAnswersContainer(),this.state.editMode>0&&u.a.createElement("div",{className:"flex center justify-center mt-12 mb-12"},u.a.createElement(m.o,{variant:"extended","aria-label":"Add",size:"small",className:"mb-12",onClick:this.addNewAnswer},u.a.createElement(m.w,null,"add"),"Add answer")))}}]),t}(l.Component);var J=Object(f.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(p.c)({saveQuestionContent:S,removeContent:A},e)})(G),B=n(329),Y=n.n(B),H=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={_id:0,openNewItem:!1,itemType:"",itemCount:0,category_id:0,contentData:[]},n.openNewItemDialog=function(){n.setState({openNewItem:!0})},n.closeNewItemDialog=function(){n.setState({openNewItem:!1})},n.handleChange=function(e){n.setState(g.a.set(Object(a.a)({},n.state),e.target.name,e.target.value))},n.addItem=function(){var e=n.state.itemCount,t=n.state.contentData;if("Text"===n.state.itemType){var a={item_id:n.state.itemCount+1,item_type:"Text",title:"New Text",content:"New Text"};e++,n.setState({itemCount:e}),t.push(a),n.setState({contentData:t}),n.props.addContent(n.props.contents.category_id,a,n.state._id)}else if("Image"===n.state.itemType){var r={item_id:n.state.itemCount+1,item_type:"Image",title:"New Image",content:""};e++,n.setState({itemCount:e}),t.push(r),n.setState({contentData:t}),n.props.addContent(n.props.contents.category_id,r,n.state._id)}else if("Question"===n.state.itemType){var i={item_id:n.state.itemCount+1,item_type:"Question",title:"New Question",answers:[{answer_id:1,answer_string:"Answer",result:!1}]};e++,n.setState({itemCount:e}),t.push(i),n.setState({contentData:t}),n.props.addContent(n.props.contents.category_id,i,n.state._id)}else n.setState({itemCount:e}),n.setState({contentData:t})},n._renderTextItem=function(e,t){return u.a.createElement(W,{_id:t.item_id,title:t.title,textcontent:t.content,key:e})},n._renderImageItem=function(e,t){return u.a.createElement(X,{_id:t.item_id,title:t.title,src:t.content,key:e})},n._renderQuestionItem=function(e,t){return u.a.createElement(J,{_id:t.item_id,question:t.title,answers:t.answers,key:e})},n._renderContentContainer=function(){return n.state.contentData.map(function(e,t){return"Text"===e.item_type?n._renderTextItem(t,e):"Image"===e.item_type?n._renderImageItem(t,e):"Question"===e.item_type?n._renderQuestionItem(t,e):null})},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getContents(this.props.match.params).then(function(){e.props.contents&&e.setState({contentData:e.props.contents.items,itemCount:e.props.contents.item_count,category_id:e.props.contents.category_id,_id:e.props.contents._id})})}},{key:"componentDidUpdate",value:function(e,t){var n=this;g.a.isEqual(this.props.contents,e.contents)||(console.log("didupdate"),this.props.getContents(this.props.match.params).then(function(){console.log(n.props.contents.items),n.setState({contentData:n.props.contents.items,itemCount:n.props.contents.item_count,category_id:n.props.contents.category_id,_id:n.props.contents._id})}))}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.l,{classes:{contentCardWrapper:"p-16 sm:p-24 pb-80",header:"min-h-36 h-36 sm:h-68 sm:min-h-68"},header:u.a.createElement(E,null),content:u.a.createElement("div",null,u.a.createElement("div",null,this._renderContentContainer()),u.a.createElement("div",{className:"flex center justify-center mt-12 mb-12"},u.a.createElement(Y.a,{variant:"extended","aria-label":"Add",size:"large",onClick:this.openNewItemDialog},u.a.createElement(m.w,null,"add"),"Add Item"))),innerScroll:!0}),u.a.createElement(m.j,{classes:{paper:"m-24"},open:this.state.openNewItem,onClose:this.closeNewItemDialog,fullWidth:!0,maxWidth:"sm"},u.a.createElement(m.a,{position:"static",elevation:1},u.a.createElement(m.Y,{className:"flex w-full"},u.a.createElement(m.ab,{variant:"subtitle1",color:"inherit"},"New Item"))),u.a.createElement(m.l,{classes:{root:"p-24"}},u.a.createElement("div",{className:"flex"},u.a.createElement(m.ab,{variant:"subtitle1",color:"inherit",className:"min-w-160 pt-20"},"Select"),u.a.createElement(m.Q,{className:"mb-24",native:!0,fullWidth:!0,id:"itemType",name:"itemType",value:this.state.itemType,onChange:this.handleChange},u.a.createElement("option",{value:"Choose"},"Choose..."),u.a.createElement("option",{value:"Text"},"Text"),u.a.createElement("option",{value:"Image"},"Image"),u.a.createElement("option",{value:"Question"},"Question")))),u.a.createElement(m.k,{className:"justify-between pl-16"},u.a.createElement(m.c,{variant:"contained",color:"primary",size:"large",onClick:function(){e.addItem(),e.closeNewItemDialog()}},"Add"))))}}]),t}(l.Component);t.default=Object(v.a)("Contents",M)(Object(h.g)(Object(f.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(p.c)({getContents:O,addContent:j},e)})(H)))}}]);