(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1210:function(e,t,n){"use strict";var a=n(9),r=n(10),o=n(13),i=n(11),s=n(12),l=n(0),c=n.n(l),u=n(117),d=n(19);t.a=function(e,t){return function(n){return function(l){function m(n){var r;return Object(a.a)(this,m),r=Object(o.a)(this,Object(i.a)(m).call(this,n)),Object(u.b)(e,t),r}return Object(s.a)(m,l),Object(r.a)(m,[{key:"render",value:function(){var t=this;return c.a.createElement(d.a.Consumer,null,function(a){return a.store,a.storeState[e]?c.a.createElement(n,t.props):null})}}]),m}(c.a.PureComponent)}}},1211:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},1212:function(e,t,n){"use strict";var a=n(1211);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=(0,a(n(1213)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Add");t.default=o},1213:function(e,t,n){"use strict";var a=n(1211);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(82)),i=a(n(67));var s=function(e,t){var n=function(t){return r.default.createElement(i.default,t,e)};return n.displayName="".concat(t,"Icon"),(n=(0,o.default)(n)).muiName="SvgIcon",n};t.default=s},1214:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n(10),o=n(13),i=n(11),s=n(12),l=n(0),c=n.n(l),u=n(33),d=n(16),m=n(141),p=n(19),f=n(1210),h=n(15),v=n(1),b=n(1212),E=n.n(b),g=n(97),w="[CONTENT APP] GET CONTENTS",C="[CONTENT APP] ADD CONTENT",_="[CONTENT APP] SAVE TEXT CONTENT",y="[CONTENT APP] SAVE IMAGE CONTENT",N="[CONTENT APP] SAVE QUESTION CONTENT",O="[CONTENT APP] REMOVE CONTENT",j="[CONTENT APP] ADD PROBLEM",x="[CONTENT APP] REMOVE PROBLEM";function P(e){var t=e.id;return function(n){return g.a.post("/content/getContentsByCategoryId",{id:t}).then(function(t){return n({type:w,payload:t.data.doc,routeParams:e})})}}function I(e,t,n){var a={id:e};return function(r){return g.a.post("/content/addContent",{category_id:e,content:t,_id:n}).then(function(e){return Promise.all([r({type:C,payload:e.data.doc})]).then(function(){return r(P(a))})})}}function T(e,t){var n={id:t};return function(a){return g.a.post("/content/saveTextContent",{content:e,_id:t}).then(function(e){return Promise.all([a({type:_,payload:e.data.doc})]).then(function(){return a(P(n))})})}}function A(e,t,n){return function(a,r){var o=r().Contents.contents.routeParams;return g.a.post("/content/saveImageContent",{content:e,_id:t,path:n}).then(function(e){return Promise.all([a({type:y,payload:e.data.doc})]).then(function(){return a(P(o))})})}}function S(e,t){var n={id:t};return function(a){return g.a.post("/content/saveQuestionContent",{content:e,_id:t}).then(function(e){return Promise.all([a({type:N,payload:e.data.doc})]).then(function(){return a(P(n))})})}}function D(e,t){return function(n,a){var r=a().Contents.contents.routeParams;return g.a.post("/content/removeContent",{content:e,_id:t}).then(function(e){return n({type:O,payload:e.data.doc,routeParams:r})})}}function k(e){return function(t,n){var a=n().Contents.contents.routeParams;return g.a.post("/content/addProblem",{category_id:e}).then(function(e){return Promise.all([t({type:j,payload:e.data.doc})]).then(function(){return t(P(a))})})}}function M(e,t){return function(n,a){var r=a().Contents.contents.routeParams;return g.a.post("/content/removeProblem",{category_id:e,problem_id:t}).then(function(e){return Promise.all([n({type:x,payload:e.data.doc})]).then(function(){return n(P(r))})})}}var q=n(8),Q={entities:"",routeParams:{}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(q.a)({},e,{entities:t.payload,routeParams:t.routeParams});case O:return console.log(t.payload),Object(q.a)({},e,{entities:t.payload,routeParams:t.routeParams});default:return e}},W=Object(d.d)({contents:z}),R=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).addNewProblem=function(){n.props.addProblem(n.props.contents.category_id)},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"flex flex-1 items-center justify-between p-18 sm:p-24"},c.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},c.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},c.a.createElement("div",{className:"flex items-center"},c.a.createElement(u.a,{animation:"transition.expandIn",delay:300},c.a.createElement(v.w,{className:"text-32 mr-12"},"edit")),c.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(v.ab,{variant:"h6",className:"hidden sm:flex"},"Edit Contents"))))),c.a.createElement(u.a,{animation:"transition.slideRightIn",delay:300},c.a.createElement(v.o,{color:"primary","aria-label":"Add",onClick:this.addNewProblem},c.a.createElement(E.a,null))))}}]),t}(l.Component);var V=Object(f.a)("Contents",W)(Object(m.g)(Object(p.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(d.c)({addProblem:k},e)})(R))),X=n(52),F=n(62),U=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).toEditMode=function(){n.setState({editMode:1})},n.save=function(){n.props.saveTextContent(n.state,n.props.contents.category_id),n.setState({editMode:0})},n.handleChange=function(e){n.setState(h.a.set(Object(q.a)({},n.state),e.target.name,e.target.value))},n.state={_id:e._id,problem_id:e.problem_id,title:e.title,textcontent:e.textcontent,editMode:0},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.removeContent;return c.a.createElement("div",null,c.a.createElement("div",{className:"flex"},this.state.editMode>0&&c.a.createElement(v.X,{className:"mb-12 min-w-auto ml-24 mr-24",id:"title",name:"title",value:this.state.title,onChange:this.handleChange,variant:"outlined",required:!0,fullWidth:!0}),!this.state.editMode&&c.a.createElement("h1",{style:{padding:"5px 10px",textAlign:"left",color:"#7D7D7D",margin:"auto",width:"85%"}},this.state.title),c.a.createElement(v.x,{className:n.button,"aria-label":"Edit",onClick:this.toEditMode},c.a.createElement(v.w,null,"edit")),c.a.createElement(v.x,{className:n.button,"aria-label":"Save",disabled:!this.state.editMode,onClick:this.save},c.a.createElement(v.w,null,"save")),c.a.createElement(v.x,{className:n.button,"aria-label":"Delete",onClick:function(t){t.stopPropagation(),window.confirm("Are you sure to delete it?")&&(a(e.state,e.props.contents.category_id),console.log("deleted"),window.location.reload())}},c.a.createElement(v.w,null,"delete"))),c.a.createElement("div",{className:"flex center"},this.state.editMode>0&&c.a.createElement(v.X,{className:"mb-12 min-w-auto pt-20 ml-24 mr-24",multiline:!0,id:"textcontent",name:"textcontent",onChange:this.handleChange,value:this.state.textcontent,variant:"outlined",fullWidth:!0}),!this.state.editMode&&c.a.createElement("textarea",{style:{padding:"10px 20px",color:"black",width:"100%",fontSize:"22px"},rows:5,readOnly:!0,value:this.state.textcontent})))}}]),t}(l.Component);var L=Object(X.withStyles)(function(e){return{button:{margin:e.spacing.unit},input:{display:"none"},disableStyle1:{color:F.red}}})(Object(p.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(d.c)({saveTextContent:T,removeContent:D},e)})(U)),B=n(368),G=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).toEditMode=function(){n.setState({editMode:1})},n.save=function(){n.setState({editMode:0})},n.openImageDialog=function(){n.setState({open:!0})},n.closeImageDialog=function(){n.setState({open:!1})},n.handleselectedFile=function(e){var t=e.target.files[0],a=new FormData;a.append("file",t);g.a.post("/upload",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){n.props.saveImageContent(n.state,n.props.contents.category_id,"http://67.209.127.24:80/uploads/"+e.data.file.filename),n.setState({src:"http://67.209.127.24:80/uploads/"+e.data.file.filename})})},n.state={_id:e._id,problem_id:e.problem_id,title:e.title,src:e.src,editMode:0,open:!1},n.openImageDialog=n.openImageDialog.bind(Object(B.a)(Object(B.a)(n))),n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){h.a.isEqual(this.props.src,e.src)||(this.setState({src:this.props.src,open:!1}),this.openImageDialog=this.openImageDialog.bind(this))}},{key:"render",value:function(){var e=this,t=this.props.removeContent;return c.a.createElement("div",null,c.a.createElement("div",{className:"flex center justify-center"},c.a.createElement("img",{src:this.state.src,width:"auto",height:"350px",alt:"No data! Upload ",onClick:this.openImageDialog})),c.a.createElement("div",{className:"flex center mt-12 mb-12 justify-center"},c.a.createElement("input",{type:"file",id:"photo_url",name:"photo_url",onChange:this.handleselectedFile,ref:function(t){return e.upload=t},style:{display:"none"}}),c.a.createElement(v.c,{variant:"contained",color:"inherit",className:"flex right mt-12 mb-12 mr-12 ml-12",size:"small",onClick:function(t){return e.upload.click()}},"Change",c.a.createElement(v.w,null,"find_replace")),c.a.createElement(v.c,{variant:"contained",color:"primary",className:"flex right mt-12 mb-12 mr-12 ml-12",size:"small",onClick:function(n){n.stopPropagation(),window.confirm("Are you sure to delete it?")&&(t(e.state,e.props.contents.category_id),window.location.reload())}},"Delete",c.a.createElement(v.w,null,"delete"))),c.a.createElement(v.j,{open:this.state.open,fullWidth:!0,onClose:this.closeImageDialog,maxWidth:"xl"},c.a.createElement(v.l,null,c.a.createElement("div",{className:"flex center justify-center"},c.a.createElement("img",{src:this.state.src,width:"auto",height:"500px",alt:"No data! Upload"})))))}}]),t}(l.Component);var H=Object(p.b)(function(e){var t=e.Contents;return{imageDialog:t.contents.imageDialog,contents:t.contents.entities}},function(e){return Object(d.c)({saveImageContent:A,removeContent:D},e)})(G),J=n(331),Y=n.n(J),K=n(330),Z=n.n(K),$=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).toEditMode=function(){n.setState({editMode:1})},n.save=function(){n.props.saveQuestionContent(n.state,n.props.contents.category_id),n.setState({editMode:0})},n.handleChangeRadio=function(e){return function(){var t=n.state.answers;t.forEach(function(t){t.result=!1,t.answer_id===e+1&&(t.result=!0)}),n.setState({answers:t})}},n.handleChangeAnswer=function(e){return function(t){var a=n.state.answers;a.forEach(function(n){n.answer_id===e+1&&(n.answer_string=t.target.value)}),n.setState({answers:a})}},n.handleChangeClause=function(e){return function(t){var a=n.state.answers;a.forEach(function(n){n.answer_id===e+1&&(n.answer_clause=t.target.value)}),n.setState({answers:a})}},n.handleChange=function(e){n.setState(h.a.set(Object(q.a)({},n.state),e.target.name,e.target.value))},n.addNewAnswer=function(){var e=n.state.answers;e.push({answer_id:e.length+1,answer_string:"New Answer",result:!1}),n.setState({answers:e})},n.deleteAnswer=function(e){return function(){var t=[];n.state.answers.forEach(function(n){if(n.answer_id<e+1&&t.push(n),n.answer_id>e+1){var a=n;a.answer_id--,t.push(a)}}),n.setState({answers:t})}},n._renderAnswerItemNormal=function(e,t){var n=String.fromCharCode(65+e);return c.a.createElement("div",{className:"flex",key:e},c.a.createElement("textarea",{style:{padding:"10px 20px",color:!0===t.result?"green":"black",margin:"15px 15px 5px",width:"100%",fontSize:"22px"},readOnly:!0,value:n+")  "+t.answer_string+(!0===t.result&&null!=t.answer_clause&&null!=t.answer_clause[0]?" ("+t.answer_clause+")":"")}))},n._renderAnswerItemEdit=function(e,t){return c.a.createElement("div",{className:"flex",key:e},c.a.createElement(Z.a,{checked:t.result,onChange:n.handleChangeRadio(e),name:"result",id:"result"}),c.a.createElement(v.X,{className:"mt-6 mb-6 min-w-auto ml-24 mr-24",id:"answer",name:"answer",value:t.answer_string,multiline:!0,onChange:n.handleChangeAnswer(e),variant:"outlined",style:{width:"60%"},required:!0}),c.a.createElement(v.X,{className:"mt-6 mb-6 min-w-auto ml-24 mr-24",id:"answer",name:"answer",value:t.answer_clause,multiline:!0,onChange:n.handleChangeClause(e),variant:"outlined",style:{width:"30%"},placeholder:"Write Clause",required:!0}),c.a.createElement(v.o,{color:"default","aria-label":"clear",size:"small",className:"mt-12 mb-6 min-w-auto ml-24 mr-24",onClick:n.deleteAnswer(e)},c.a.createElement(v.w,null,"clear")))},n._renderAnswers=function(){return n.state.answers.map(function(e,t){return n.state.editMode?n._renderAnswerItemEdit(t,e):n._renderAnswerItemNormal(t,e)})},n._renderAnswersContainer=function(){return n.state.editMode?c.a.createElement(Y.a,null,n._renderAnswers()):c.a.createElement("div",null,n._renderAnswers())},n.state={_id:e._id,problem_id:e.problem_id,question:e.question,answers:e.answers,editMode:0},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.removeContent;return c.a.createElement("div",null,c.a.createElement("div",{className:"flex"},this.state.editMode>0&&c.a.createElement(v.X,{className:"min-w-auto ml-24 mr-24",id:"question",name:"question",value:this.state.question,onChange:this.handleChange,variant:"outlined",required:!0,fullWidth:!0}),!this.state.editMode&&c.a.createElement("h1",{style:{textAlign:"left",color:"blue",margin:"auto",width:"85%"}},this.state.question),c.a.createElement(v.x,{"aria-label":"Edit",onClick:this.toEditMode},c.a.createElement(v.w,null,"edit")),c.a.createElement(v.x,{"aria-label":"Save",disabled:!this.state.editMode,onClick:this.save},c.a.createElement(v.w,null,"save")),c.a.createElement(v.x,{"aria-label":"Delete",onClick:function(n){n.stopPropagation(),window.confirm("Are you sure to delete it?")&&(t(e.state,e.props.contents.category_id),window.location.reload())}},c.a.createElement(v.w,null,"delete"))),c.a.createElement("div",{style:{width:"800px"}},this._renderAnswersContainer()),this.state.editMode>0&&c.a.createElement("div",{className:"flex center justify-center mt-12 mb-12"},c.a.createElement(v.o,{variant:"extended","aria-label":"Add",size:"small",className:"mb-12",onClick:this.addNewAnswer},c.a.createElement(v.w,null,"add"),"Add answer")))}}]),t}(l.Component);var ee=Object(p.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(d.c)({saveQuestionContent:S,removeContent:D},e)})($),te=n(329),ne=n.n(te),ae=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).openNewItemDialog=function(){n.setState({openNewItem:!0})},n.closeNewItemDialog=function(){n.setState({openNewItem:!1})},n.handleChange=function(e){n.setState(h.a.set(Object(q.a)({},n.state),e.target.name,e.target.value))},n.addItem=function(){var e=n.state.itemCount,t=n.state.contentData;if("Text"===n.state.itemType){var a={item_id:n.state.itemCount+1,item_type:"Text",title:"New Text",content:"New Text"};e++,n.setState({itemCount:e}),t.push(a),n.setState({contentData:t}),n.props.addContent(n.props.contents.category_id,a,n.state._id)}else if("Image"===n.state.itemType){var r={item_id:n.state.itemCount+1,item_type:"Image",title:"New Image",content:""};e++,n.setState({itemCount:e}),t.push(r),n.setState({contentData:t}),n.props.addContent(n.props.contents.category_id,r,n.state._id)}else if("Question"===n.state.itemType){var o={item_id:n.state.itemCount+1,item_type:"Question",title:"New Question",answers:[{answer_id:1,answer_string:"Answer",result:!1}]};e++,n.setState({itemCount:e}),t.push(o),n.setState({contentData:t}),n.props.addContent(n.props.contents.category_id,o,n.state._id)}else n.setState({itemCount:e}),n.setState({contentData:t})},n._renderTextItem=function(e,t){return c.a.createElement(L,{_id:t.item_id,problem_id:n.state._id,title:t.title,textcontent:t.content,key:e})},n._renderImageItem=function(e,t){return c.a.createElement(H,{_id:t.item_id,problem_id:n.state._id,title:t.title,src:t.content,key:e})},n._renderQuestionItem=function(e,t){return c.a.createElement(ee,{_id:t.item_id,problem_id:n.state._id,question:t.title,answers:t.answers,key:e})},n._renderContentContainer=function(){return n.state.contentData.map(function(e,t){return"Text"===e.item_type?n._renderTextItem(t,e):"Image"===e.item_type?n._renderImageItem(t,e):"Question"===e.item_type?n._renderQuestionItem(t,e):null})},n.state={_id:e._id,openNewItem:!1,itemType:"",itemCount:e.itemCount,contentData:e.items},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"removeProblem",value:function(){this.props.removeProblem(this.props.contents.category_id,this.state._id)}},{key:"render",value:function(){var e=this;return c.a.createElement(v.L,{elevation:3,className:"rounded-4 mb-24 ml-12 mr-12 mt-4"},c.a.createElement("div",{className:"flex center justify-center mt-12 mb-12"},c.a.createElement("div",null,this._renderContentContainer())),c.a.createElement("div",{className:"flex center justify-center mt-12 mb-12"},c.a.createElement(ne.a,{className:"mb-12 mr-12",color:"secondary",variant:"extended","aria-label":"Add",size:"large",onClick:this.openNewItemDialog},c.a.createElement(v.w,null,"add"),"Add Item"),c.a.createElement(ne.a,{className:"mb-12 ml-12",color:"primary",variant:"extended","aria-label":"Delete",size:"large",onClick:function(t){t.stopPropagation(),window.confirm("Are you sure to delete this problem?")&&(e.removeProblem(),window.location.reload())}},c.a.createElement(v.w,null,"delete"),"Delete")),c.a.createElement(v.j,{classes:{paper:"m-24"},open:this.state.openNewItem,onClose:this.closeNewItemDialog,fullWidth:!0,maxWidth:"sm"},c.a.createElement(v.a,{position:"static",elevation:1},c.a.createElement(v.Y,{className:"flex w-full"},c.a.createElement(v.ab,{variant:"subtitle1",color:"inherit"},"New Item"))),c.a.createElement(v.l,{classes:{root:"p-24"}},c.a.createElement("div",{className:"flex"},c.a.createElement(v.ab,{variant:"subtitle1",color:"inherit",className:"min-w-160 pt-20"},"Select"),c.a.createElement(v.Q,{className:"mb-24",native:!0,fullWidth:!0,id:"itemType",name:"itemType",value:this.state.itemType,onChange:this.handleChange},c.a.createElement("option",{value:"Choose"},"Choose..."),c.a.createElement("option",{value:"Text"},"Text"),c.a.createElement("option",{value:"Image"},"Image"),c.a.createElement("option",{value:"Question"},"Question")))),c.a.createElement(v.k,{className:"justify-between pl-16"},c.a.createElement(v.c,{variant:"contained",color:"primary",size:"large",onClick:function(){e.addItem(),e.closeNewItemDialog()}},"Add"))))}}]),t}(l.Component);var re=Object(f.a)("Contents",W)(Object(m.g)(Object(p.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(d.c)({getContents:P,addContent:I,removeProblem:M},e)})(ae))),oe=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={_id:0,problemCount:0,category_id:0,contentData:[]},n._rednerProblemItem=function(e,t){return c.a.createElement(re,{_id:t.problem_id,itemCount:t.item_count,items:t.items,key:e})},n._renderContentContainer=function(){return n.state.contentData.map(function(e,t){return n._rednerProblemItem(t,e)})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getContents(this.props.match.params).then(function(){e.props.contents&&e.setState({contentData:e.props.contents.problems,problemCount:e.props.contents.problem_count,category_id:e.props.contents.category_id,_id:e.props.contents._id})})}},{key:"componentDidUpdate",value:function(e,t){var n=this;h.a.isEqual(this.props.contents,e.contents)||(console.log("didupdate"),this.props.getContents(this.props.match.params).then(function(){n.setState({contentData:n.props.contents.problems,problemCount:n.props.contents.problem_count,category_id:n.props.contents.category_id,_id:n.props.contents._id})}))}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.l,{classes:{contentCardWrapper:"p-16 sm:p-24 pb-80",header:"min-h-36 h-36 sm:h-68 sm:min-h-68"},header:c.a.createElement(V,null),content:c.a.createElement("div",null,c.a.createElement("div",null,this._renderContentContainer())),innerScroll:!0}))}}]),t}(l.Component);t.default=Object(f.a)("Contents",W)(Object(m.g)(Object(p.b)(function(e){return{contents:e.Contents.contents.entities}},function(e){return Object(d.c)({getContents:P,addContent:I},e)})(oe)))}}]);